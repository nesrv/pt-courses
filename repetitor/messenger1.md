
## üìÑ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ

###  –ü—Ä–æ—Å—Ç–æ–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä –Ω–∞ Python

---

### üéØ –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞:

–†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ–Ω—Å–æ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ¬´–ü—Ä–æ—Å—Ç–æ–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä¬ª —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –æ–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è. 
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ "–æ–¥–∏–Ω –Ω–∞ –æ–¥–∏–Ω", –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –ø–µ—Ä–µ–ø–∏—Å–∫–∏, –∞ —Ç–∞–∫–∂–µ —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–≤–æ–∏–º–∏ —á–∞—Ç–∞–º–∏.

---

## üìå –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (–±–∞–∑–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å)

### 1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

* –ö–ª–∞—Å—Å: `User`
* –ü–æ–ª—è:

  * `username` ‚Äî –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å—Ç—Ä–æ–∫–∞)
  * `inbox` ‚Äî —Å–ø–∏—Å–æ–∫ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
* –ú–µ—Ç–æ–¥—ã:

  * `send_message(to_user, text, chat)` ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
  * `__str__()` ‚Äî –≤—ã–≤–æ–¥ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

### 2. –°–æ–æ–±—â–µ–Ω–∏—è

* –ö–ª–∞—Å—Å: `Message`
* –ü–æ–ª—è:

  * `sender` ‚Äî –æ–±—ä–µ–∫—Ç `User`, –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å
  * `receiver` ‚Äî –æ–±—ä–µ–∫—Ç `User`, –ø–æ–ª—É—á–∞—Ç–µ–ª—å
  * `text` ‚Äî —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è (—Å—Ç—Ä–æ–∫–∞)
  * `timestamp` ‚Äî –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏ (`datetime`)
  * `read` ‚Äî —Å—Ç–∞—Ç—É—Å –ø—Ä–æ—á—Ç–µ–Ω–∏—è (`True/False`)
* –ú–µ—Ç–æ–¥—ã:

  * `mark_as_read()` ‚Äî –ø–æ–º–µ—Ç–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ
  * `__str__()` ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥ (—Å –≤—Ä–µ–º–µ–Ω–µ–º –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–º)

---

### 3. –ß–∞—Ç—ã

* –ö–ª–∞—Å—Å: `Chat`
* –ü–æ–ª—è:

  * `participants` ‚Äî –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∏–∑ –¥–≤—É—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  * `messages` ‚Äî —Å–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤ `Message`
* –ú–µ—Ç–æ–¥—ã:

  * `add_message(message)` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç
  * `get_history()` ‚Äî –≤—ã–≤–µ—Å—Ç–∏ –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è
  * `get_unread_messages(user)` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

### 4. –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä (—Å–∏—Å—Ç–µ–º–∞)

* –ö–ª–∞—Å—Å: `Messenger`
* –ü–æ–ª—è:

  * `users` ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  * `chats` ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —á–∞—Ç–æ–≤
* –ú–µ—Ç–æ–¥—ã:

  * `register_user(username)` ‚Äî —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  * `create_chat(user1, user2)` ‚Äî —Å–æ–∑–¥–∞—Ç—å —á–∞—Ç –º–µ–∂–¥—É –¥–≤—É–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
  * `get_user(username)` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –æ–±—ä–µ–∫—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –∏–º–µ–Ω–∏
  * `get_chat(user1, user2)` ‚Äî –Ω–∞–π—Ç–∏ –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å —á–∞—Ç –º–µ–∂–¥—É –¥–≤—É–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

---



```PY
from datetime import datetime

# ----------------------------
# –ö–ª–∞—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
# ----------------------------
class User:
    def __init__(self, username):
        self.username = username  # –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        self.inbox = []           # –í—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –Ω–æ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è)

    def send_message(self, to_user, text, chat):
        # –ú–µ—Ç–æ–¥ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–π —á–∞—Ç
        message = Message(sender=self, receiver=to_user, text=text)
        chat.add_message(message)

    def __str__(self):
        return self.username


# ----------------------------
# –ö–ª–∞—Å—Å –æ–¥–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
# ----------------------------
class Message:
    def __init__(self, sender, receiver, text):
        self.sender = sender              # –û–±—ä–µ–∫—Ç User, –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å
        self.receiver = receiver          # –û–±—ä–µ–∫—Ç User, –ø–æ–ª—É—á–∞—Ç–µ–ª—å
        self.text = text                  # –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
        self.timestamp = datetime.now()   # –í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏
        self.read = False                 # –°—Ç–∞—Ç—É—Å –ø—Ä–æ—á—Ç–µ–Ω–∏—è: False –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

    def mark_as_read(self):
        self.read = True  # –û—Ç–º–µ—Ç–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ

    def __str__(self):
        # –°—Ç—Ä–æ–∫–æ–≤–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
        status = "‚úì‚úì" if self.read else "‚úì"
        time = self.timestamp.strftime("%H:%M")
        return f"[{time}] {self.sender.username} ‚ûú {self.receiver.username}: {self.text} {status}"


# ----------------------------
# –ö–ª–∞—Å—Å —á–∞—Ç–∞ –º–µ–∂–¥—É –¥–≤—É–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
# ----------------------------
class Chat:
    def __init__(self, user1, user2):
        self.participants = {user1, user2}  # –£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∏–∑ 2 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        self.messages = []                 # –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç–µ

    def add_message(self, message):
        self.messages.append(message)      # –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç

    def get_history(self):
        # –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç–µ
        for message in self.messages:
            print(message)

    def get_unread_messages(self, user):
        # –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        return [msg for msg in self.messages if msg.receiver == user and not msg.read]


# ----------------------------
# –ö–ª–∞—Å—Å —Å–∏—Å—Ç–µ–º—ã-–º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞
# ----------------------------
class Messenger:
    def __init__(self):
        self.users = []  # –í—Å–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
        self.chats = []  # –í—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —á–∞—Ç—ã

    def register_user(self, username):
        # –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        user = User(username)
        self.users.append(user)
        return user

    def get_user(self, username):
        # –ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –∏–º–µ–Ω–∏
        for user in self.users:
            if user.username == username:
                return user
        return None

    def create_chat(self, user1, user2):
        # –°–æ–∑–¥–∞—Ç—å —á–∞—Ç –º–µ–∂–¥—É –¥–≤—É–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –µ—Å–ª–∏ –æ–Ω –µ—â—ë –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
        existing = self.get_chat(user1, user2)
        if existing:
            return existing
        chat = Chat(user1, user2)
        self.chats.append(chat)
        return chat

    def get_chat(self, user1, user2):
        # –ù–∞–π—Ç–∏ —á–∞—Ç –º–µ–∂–¥—É –¥–≤—É–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å
        for chat in self.chats:
            if {user1, user2} == chat.participants:
                return chat
        return None


# ----------------------------
# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (–¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è)
# ----------------------------

# –°–æ–∑–¥–∞—ë–º –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä
app = Messenger()

# –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –¥–≤—É—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
alice = app.register_user("Alice")
bob = app.register_user("Bob")

# –°–æ–∑–¥–∞—ë–º —á–∞—Ç –º–µ–∂–¥—É –Ω–∏–º–∏
chat = app.create_chat(alice, bob)

# Alice –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ Bob'—É
alice.send_message(to_user=bob, text="–ü—Ä–∏–≤–µ—Ç, –ë–æ–±!", chat=chat)

# Bob –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç
bob.send_message(to_user=alice, text="–ü—Ä–∏–≤–µ—Ç, –ê–ª–∏—Å–∞! –ö–∞–∫ –¥–µ–ª–∞?", chat=chat)

# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é –ø–µ—Ä–µ–ø–∏—Å–∫–∏
print("\nüìú –ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞:")
chat.get_history()

# –ü–æ–ª—É—á–∞–µ–º –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è Alice
unread = chat.get_unread_messages(alice)
print(f"\nüì¨ –£ {alice.username} –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π: {len(unread)}")

# –û—Ç–º–µ—á–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ
for msg in unread:
    msg.mark_as_read()

# –ü–æ–≤—Ç–æ—Ä–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é ‚Äî —Ç–µ–ø–µ—Ä—å –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–æ—á–∏—Ç–∞–Ω—ã
print("\n‚úÖ –ò—Å—Ç–æ—Ä–∏—è –ø–æ—Å–ª–µ –ø—Ä–æ—á—Ç–µ–Ω–∏—è:")
chat.get_history()


```